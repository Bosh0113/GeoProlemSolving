<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<label for="email">Email: </label><input id="email" type="text" style="width: 150px;height: 20px">
<label for="password">Password: </label><input id="password" type="text" style="width: 150px;height: 20px">
<br>
<button id="login">Login</button>
<br>
<label for="uploadFile">file</label><input id="uploadFile" type="file" class="model file" data-show-preview="false"
                                           data-show-upload="false">
<button id="upload">Upload</button>
<br>
<button id="sendEmail">Send Email</button>
<script>
    $("#login").click(function () {
        $.ajax({
            type: "get",
            url: "/user/login" + "?email=" + $("#email").val() + "&password=" + $("#password").val(),
            success: function (data) {
                if (data !== "Fail") {
                    sessionStorage.setItem("username", data.userName);
                    console.log(data.userName + " login success!");
                    // window.location.href="http://localhost:8081/Collaborative/ConceptualModel/index.html?groupID=111";
                    // window.location.href="http://localhost:8081/Collaborative/LogicalModel/index.html?groupID=111";
                    // window.location.href="http://localhost:8081/Collaborative/ComputationalModel/index.html?groupID=111";
                    window.location.href="http://localhost:8081/notice.html";
                }
                else {
                    confirm("Fail");
                }
            }
        })
    });

    $("#upload").click(function () {
        var file = document.getElementById("uploadFile").files[0];
        var formData = new FormData();
        formData.append("file", file);
        formData.append("uploader", "zbc");
        $.ajax({
            type: "POST",
            url: "/resource/upload",
            data: formData,
            cache: false,         //不设置缓存
            processData: false,  // 不处理数据
            contentType: false,  // 不设置内容类型
            success: function (data) {
                alert(data);
            },
            error: function () {
                alert("fail!");
            }
        });
    });

    $("#sendEmail").click(function () {
        var emailJSON = {};
        emailJSON["recipient"] = "zbc555day@163.com";
        emailJSON["mailTitle"] = "OpenGMS GeoProblemSolving";
        emailJSON["mailContent"] = "This is the test Email from the back of SpringBoot.";
        $.ajax({
            type: "post",
            url: "/email/send",
            data: emailJSON,
            success: function (data) {
                if (data !== "Fail") {
                    confirm("Success");
                }
                else {
                    confirm("Fail");
                }
            },
            error: function (data) {
                confirm("Fail");
                console.log(data);
            }
        })
    });
</script>
</body>
</html>